(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["templates"],{"4d08":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s("9173"),i=s("6073"),r=s("3b9f");const l=(e,t,s)=>{let a=document.getElementById(e);if(a)return a;const l=document.getElementsByTagName("head")[0]||document.documentElement;return a=document.createElement("script"),a.type="text/javascript",a.id=e,a.src=r["a"].apiJs(),a.async=!0,a.dataset.account=t,a.dataset.user=s,Object(i["isProduction"])()||(a.dataset.env=Object(i["isDevelopment"])()?"dev":i["currentEnv"]),l.appendChild(a),a},o={created(){this.listenApiLoaded(),Object(a["c"])(),Object(a["e"])(),Object(a["b"])(),Object(a["d"])(),Object(a["f"])(),this.$store.subscribe(e=>{const t=["templates/setLoadingPreview","templates/setPreviewing","templates/filterOptions","templates/templates","templates/permittedTypes","templates/recentTemplates","templates/popular","templates/setApiLoaded"],s=["route/ROUTE_CHANGED"];let a=e.type.startsWith("templates/")&&!t.includes(e.type);a||(a=s.includes(e.type)),a&&this.closeAllPreviews()})},beforeDestroy(){Object(a["c"])(!1),Object(a["e"])(!1),Object(a["d"])(!1),Object(a["b"])(!1),Object(a["f"])(!1)},methods:{listenApiLoaded(e="addEventListener"){["om.Api.init","om.Main.init","om.Campaigns.init","om.Campaign.init"].forEach(t=>document[e](t,this.setApiLoaded))},setApiLoaded(){this.listenApiLoaded("removeEventListener"),this.$store.commit("templates/setApiLoaded")},closeAllPreviews(){Object(a["a"])(),this.$store.commit("templates/setLoadingPreview",""),this.$store.commit("templates/setPreviewing","")},loadApiScript(e,t,s){return l(e,t,s)}}}},b0d4:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.reachedCampaignLimit?t("templates-limit-exceeded"):t("core-page",{attrs:{classes:"templates-wrapper"}},[t("common-page-tabnav",{attrs:{current:"templates",tabs:e.tabs}}),t("h1",[e._v("Select a Campaign Type:")]),t("common-alerts",{attrs:{alerts:e.alerts}}),t("div",{staticClass:"templates-content"},[t("templates-types"),t("templates-filters"),t("div",{staticClass:"omapi-content-area"},[t("templates-upsell-alerts"),e.hasTemplates?t("div",{staticClass:"omapi-template-listing-wrap"},[t("templates-grid",{attrs:{templates:e.selectedTemplates}}),e.isLoading?t("svg-loading",{style:{margin:"0 auto"}}):e._e()],1):e.isLoading?t("div",{staticClass:"archie-loader-wrapper"},[t("div",[t("core-loading",{staticClass:"loader"})],1)]):t("div",{staticClass:"no-templates-available"},[t("core-alert",{attrs:{type:e.validType?"info":"warn"}},[t("div",{staticClass:"alert-message"},[e._v(" "+e._s(e.noTemplatesMessage)+" ")])])],1)],1)],1),t("campaigns-modal-create-campaign"),t("templates-modal-not-connected"),t("templates-modal-no-access")],1)},i=[],r=s("93c6"),l=s.n(r),o=s("8103"),n=s.n(o),p=s("2f62"),c=s("4d08"),m=s("d009"),d={mixins:[c["a"],m["a"]],computed:{...Object(p["f"])("templates",["activeType","search","sort","popular","templates"]),...Object(p["d"])(["reachedCampaignLimit"]),...Object(p["d"])("templates",["typePermitted","featured","filters","filterGamified","validType"]),alerts(){return this.$get("$store.state.alerts",[])},isLoading(){return this.$store.getters.isLoading("templates")},popularTemplates(){const e=this.popular[this.activeType];return e&&e.length?this.order(e):[]},featuredTemplates(){const e=this.featured[this.activeType];return e&&e.length?this.order(e):[]},showableTemplates(){const e=(e,t)=>!this.filters[e].length||!this.filters[e].find(e=>!t.includes(e)),t=["popular","featured"].includes(this.sort)?this.sort+"Templates":"templates",s=this[t].filter(e=>""===this.search||e.name.toLowerCase().includes(this.search.toLowerCase())).filter(t=>{const s="mobile"===this.filters.device?t.mobile:!t.mobile;if(!s)return!1;const a=["goals","categories","tags"];return!a.find(s=>!e(s,t[s].map(e=>e.id)))});return this.order(s)},selectedTemplates(){return this.showableTemplates.filter(e=>this.filterGamified?e.tags.find(e=>1===e.id):e.type===this.activeType)},hasTemplates(){return this.selectedTemplates.length},shouldShowUpsells(){return!!this.$store.getters.connected&&!this.typePermitted(this.activeType)},noTemplatesMessage(){return this.validType?"No templates available for your current selection.":n()(this.activeType)+" is not a valid type. Please select one of the options above."}},created(){this.$store.dispatch("campaigns/fetchDashboard").catch(()=>{}),this.loadApiScript("omwpapi-templates-apijs",this.$constants.TEMPLATES_PREVIEW_ACCOUNT,this.$constants.TEMPLATES_PREVIEW_USER)},mounted(){this.fetchTemplateData().catch(()=>{}),this.$bus.$emit("dashboard-view-mounted","templates")},methods:{...Object(p["c"])("templates",["fetchTemplateData"]),applyFilters(e){this.$bus.$emit("applied-bulk-filter"),this.$store.commit("templates/appliedFilters",e)},order(e){return l()(e,e=>"recent"===this.sort||"featured"===this.sort?-this.$moment(e.created_at).valueOf():e.name)}}},h=d,u=(s("ca5d"),s("2877")),b=Object(u["a"])(h,a,i,!1,null,null,null);t["default"]=b.exports},c49d:function(e,t,s){},ca5d:function(e,t,s){"use strict";s("c49d")},d009:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a={data(){return{tabs:{templates:{name:"Templates",route:{path:"templates",params:{tab:"popup"}}},playbooks:{name:"Playbooks",route:{path:"playbooks",params:{}}}}}}}}}]);
//# sourceMappingURL=templates.7b779062.js.map